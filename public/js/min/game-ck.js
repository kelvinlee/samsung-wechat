function main(){imgData.push({name:"lot",path:"/img/submit-lucky.png"}),imgData.push({name:"start",path:"/img/lucky-try.png"}),imgData.push({name:"slot_back",path:"/img/lucky-bg.jpg"}),imgData.push({name:"item1",path:"/img/icon-l-1.png"}),imgData.push({name:"item2",path:"/img/icon-l-2.png"}),imgData.push({name:"item3",path:"/img/icon-l-3.png"}),imgData.push({name:"item4",path:"/img/icon-l-4.png"}),imgData.push({name:"item5",path:"/img/icon-l-5.png"}),loadingLayer=new LoadingSample1,addChild(loadingLayer),LLoadManage.load(imgData,function(t){loadingLayer.setProgress(t)},function(t){imglist=t,removeChild(loadingLayer),loadingLayer=null,gameInit()})}function gameInit(t){var a,e,i,n,o;for(backLayer=new LSprite,addChild(backLayer),n=new LBitmapData(imglist.slot_back),i=new LBitmap(n),backLayer.addChild(i),stopLayer=new LSprite,addChild(stopLayer),a=0;3>a;a++){var s=new Reel(combination,a);s.x=210*a+60,s.y=85,reels.push(s),addChild(s);var r=new LBitmap(new LBitmapData(imglist.kake));r.x=150*a+90,r.y=225,kakes.push(r),addChild(r);var l=new LButton(new LBitmap(new LBitmapData(imglist.stop_up)),new LBitmap(new LBitmapData(imglist.stop_over)));l.x=150*a+110,l.y=100,l.index=a,stopBtn.push(l),l.visible=!1,l.addEventListener(LMouseEvent.MOUSE_UP,stopevent)}startLayer=new LSprite,addChild(startLayer),start=new LButton(new LBitmap(new LBitmapData(imglist.start)),new LBitmap(new LBitmapData(imglist.start))),start.x=215,start.y=410,startLayer.addChild(start),start.addEventListener(LMouseEvent.MOUSE_UP,onmouseup),lotLayer=new LSprite,addChild(lotLayer),lot=new LButton(new LBitmap(new LBitmapData(imglist.lot)),new LBitmap(new LBitmapData(imglist.lot))),lot.x=215,lot.y=410,lotLayer.addChild(lot),lot.addEventListener(LMouseEvent.MOUSE_UP,onmouseuplot),lotLayer.visible=!1,win=new LButton(new LBitmap(new LBitmapData(imglist.slot_ok)),new LBitmap(new LBitmapData(imglist.slot_ok))),startLayer.addChild(win),win.visible=!1,win.addEventListener(LMouseEvent.MOUSE_UP,winclick),backLayer.addEventListener(LEvent.ENTER_FRAME,onframe),$(".tab-item").each(function(){this.addEventListener("click",gotopage)})}function onmouseuplot(t){window.location.href="http://wservice.yazuosoft.com/yazuo-weixin/weixin/phonePage/registerPage.do?brandId=1631&weixinId=o_bYSuF_emkC8kJ6MZOgK_4o7i9U&from=singlemessage&isappinstalled=0"}function GameOver(){lotLayer.visible=!0}function gotopage(t){console.log(t)}function onframe(){var t;for(t=0;3>t;t++)reels[t].onframe()}function stopevent(t,a){console.log(a.index,a),reels[a.index].stopFlag=!0}function onmouseup(t){post()}function starplay(t){var a,e=Math.floor(Math.random()*(combination.length/3));for(start.visible=!1,a=0;3>a;a++)stopBtn[a].visible=!0,reels[a].startReel=!0,reels[a].stopFlag=!1,reels[a].stopNum=e}function winclick(){win.visible=!1,start.visible=!0}function checkWin(){var t,a=0;for(t=0;3>t;t++)reels[t].startReel||a++;if(a>=3){for(t=0;3>t;t++)stopBtn[t].visible=!1;reels[0].stopNum>=19?win.visible=!0:start.visible=!0,GameOver()}}init(50,"mylegend",640,500,main);var loadingLayer,backLayer,stopLayer,startLayer,lotLayer,loadIndex=0,imglist={},btnup,btndown,btnleft,btnright,imgData=new Array,mapImgList=new Array,mapmoveflag="",MOVE_STEP=10,combination=new Array([5,5,5]),reels=new Array,kakes=new Array,stopBtn=new Array,start,win;