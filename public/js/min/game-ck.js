function main(){imgData.push({name:"stop_up",path:"/img/slot_stop_up.png"}),imgData.push({name:"stop_over",path:"/img/slot_stop_over.png"}),imgData.push({name:"slot_back",path:"/img/lucky-bg.jpg"}),imgData.push({name:"item1",path:"/img/icon-l-1.png"}),imgData.push({name:"item2",path:"/img/icon-l-2.png"}),imgData.push({name:"item3",path:"/img/icon-l-3.png"}),imgData.push({name:"item4",path:"/img/icon-l-4.png"}),imgData.push({name:"item5",path:"/img/icon-l-5.png"}),loadingLayer=new LoadingSample1,addChild(loadingLayer),LLoadManage.load(imgData,function(a){loadingLayer.setProgress(a)},function(a){imglist=a,removeChild(loadingLayer),loadingLayer=null,gameInit()})}function gameInit(a){var t,e,i,n,s;for(backLayer=new LSprite,addChild(backLayer),n=new LBitmapData(imglist.slot_back),i=new LBitmap(n),backLayer.addChild(i),stopLayer=new LSprite,addChild(stopLayer),t=0;3>t;t++){var r=new Reel(combination,t);r.x=210*t+60,r.y=85,reels.push(r),addChild(r);var o=new LBitmap(new LBitmapData(imglist.kake));o.x=150*t+90,o.y=225,kakes.push(o),addChild(o);var m=new LButton(new LBitmap(new LBitmapData(imglist.stop_up)),new LBitmap(new LBitmapData(imglist.stop_over)));m.x=150*t+110,m.y=100,m.index=t,stopBtn.push(m),m.visible=!1,m.addEventListener(LMouseEvent.MOUSE_UP,stopevent)}startLayer=new LSprite,addChild(startLayer),start=new LButton(new LBitmap(new LBitmapData(imglist.start)),new LBitmap(new LBitmapData(imglist.start))),start.x=55,start.y=450,startLayer.addChild(start),win=new LButton(new LBitmap(new LBitmapData(imglist.slot_ok)),new LBitmap(new LBitmapData(imglist.slot_ok))),startLayer.addChild(win),win.visible=!1,win.addEventListener(LMouseEvent.MOUSE_UP,winclick),backLayer.addEventListener(LEvent.ENTER_FRAME,onframe)}function onframe(){var a;for(a=0;3>a;a++)reels[a].onframe()}function stopevent(a,t){console.log(t.index,t),reels[t.index].stopFlag=!0}function onmouseup(a){var t,e=Math.floor(Math.random()*(combination.length/3));for(start.visible=!1,t=0;3>t;t++)stopBtn[t].visible=!0,reels[t].startReel=!0,reels[t].stopFlag=!1,reels[t].stopNum=e}function winclick(){win.visible=!1,start.visible=!0}function checkWin(){var a,t=0;for(a=0;3>a;a++)reels[a].startReel||t++;if(t>=3){for(a=0;3>a;a++)stopBtn[a].visible=!1;reels[0].stopNum>=19?win.visible=!0:start.visible=!0,GameOver()}}init(50,"mylegend",640,397,main);var loadingLayer,backLayer,stopLayer,startLayer,loadIndex=0,imglist={},btnup,btndown,btnleft,btnright,imgData=new Array,mapImgList=new Array,mapmoveflag="",MOVE_STEP=10,combination=new Array([5,5,5]),reels=new Array,kakes=new Array,stopBtn=new Array,start,win;