var Inte,InteSchema,Lot,LotSchema,Lots,LotsSchema,ObjectId,Schema,UserSchema,config,mongoose;mongoose=require("mongoose"),config=require("../../../config").config,Schema=mongoose.Schema,ObjectId=Schema.ObjectId,mongoose.connect(config.mdb,function(e){return e?(console.error("Connect to %s error: %s",config.mdb,e.message),process.exit(1)):void 0}),UserSchema=new Schema({openid:{type:String,index:{unique:!0}},nickname:{type:String},sex:{type:Number,"default":0},province:{type:String},country:{type:String},headimgurl:{type:String},active:{type:Boolean,"default":!1},update_at:{type:Date,"default":new Date},create_at:{type:Date,"default":new Date}}),mongoose.model("User",UserSchema),exports.User=mongoose.model("User"),InteSchema=new Schema({openid:{type:String,index:!0},inte:{type:Number},only:{type:String},action:{type:String},create_at:{type:Date,"default":new Date}}),Inte=mongoose.model("Inte",InteSchema),exports.Inte=Inte,LotsSchema=new Schema({name:{type:String},description:{type:String},img:{type:String},order:{type:Number},inte:{type:Number},create_at:{type:Date,"default":new Date}}),Lots=mongoose.model("Lots",LotsSchema),exports.Lots=Lots,LotSchema=new Schema({info:{type:ObjectId},content:{type:String},used:{type:Boolean,"default":!1},usedby:{type:ObjectId,rel:"user"},used_at:{type:Date},create_at:{type:Date,"default":new Date}}),Lot=mongoose.model("Lot",LotSchema),exports.Lot=Lot;