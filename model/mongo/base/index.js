var Comment,CommentSchema,Inte,InteSchema,Lots,LotsSchema,ObjectId,Schema,Topic,TopicSchema,UserSchema,Warehouse,WarehouseSchema,config,mongoose;mongoose=require("mongoose"),config=require("../../../config").config,Schema=mongoose.Schema,ObjectId=Schema.ObjectId,mongoose.connect(config.mdb,function(e){return e?(console.error("Connect to %s error: %s",config.mdb,e.message),process.exit(1)):void 0}),UserSchema=new Schema({mobile:{type:String,index:{unique:!0}},password:{type:String},openid:{type:String,index:!0},nickname:{type:String},sex:{type:Number,"default":0},province:{type:String},country:{type:String},headimgurl:{type:String},active:{type:Boolean,"default":!1},update_at:{type:Date,"default":new Date},create_at:{type:Date,"default":new Date}}),mongoose.model("User",UserSchema),exports.User=mongoose.model("User"),InteSchema=new Schema({userid:{type:ObjectId,ref:"User",index:!0},inte:{type:Number},only:{type:String},action:{type:String,index:!0},create_at:{type:Date,"default":new Date,index:!0}}),Inte=mongoose.model("Inte",InteSchema),exports.Inte=Inte,LotsSchema=new Schema({name:{type:String},description:{type:String},img:{type:String},order:{type:Number},inte:{type:Number},create_at:{type:Date,"default":new Date}}),Lots=mongoose.model("Lots",LotsSchema),exports.Lots=Lots,WarehouseSchema=new Schema({info:{type:ObjectId,index:!0},content:{type:String},used:{type:Boolean,"default":!1,index:!0},usedby:{type:ObjectId,rel:"user",index:!0},used_at:{type:Date},create_at:{type:Date,"default":new Date}}),Warehouse=mongoose.model("Warehouse",WarehouseSchema),exports.Warehouse=Warehouse,TopicSchema=new Schema({name:{type:String},description:{type:String},lot:{type:String},view:{type:Number,"default":0},start_at:{type:Date,index:!0},end_at:{type:Date,index:!0},create_at:{type:Date,"default":new Date}}),Topic=mongoose.model("Topic",TopicSchema),exports.Topic=Topic,CommentSchema=new Schema({uid:{type:ObjectId,index:!0,ref:"User"},topic:{type:ObjectId,index:!0,ref:"Topic"},name:{type:String},content:{type:String},create_at:{type:Date,"default":new Date,index:1}}),Comment=mongoose.model("Comment",CommentSchema),exports.Comment=Comment;