var Inte,models;models=require("./base"),Inte=models.Inte,exports.getInteAll=function(e,t){return Inte.aggregate({$group:{_id:{userid:"$userid"},total:{$sum:"$inte"}}}).exec(function(n,r){var a,u,o,i;for(u=0,o=0,i=r.length;i>o;o++)a=r[o],a._id.userid+""==e+""&&(u=a.total);return t(null,u)})},exports.today=function(e,t){var n,r,a;return r=new Date,a=new Date(r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" 00:00:00"),n=new Date(r.getFullYear()+"-"+(r.getMonth()+1)+"-"+r.getDate()+" 23:59:59"),Inte.find({create_at:{$gte:a,$lt:n},userid:e},t)},exports.newInte=function(e,t,n,r){var a;return a=new Inte,a.userid=e,a.inte=t,a.action=n,a.save(r)};