var Inte,models;models=require("./base"),Inte=models.Inte,exports.getInteAll=function(e,t){return Inte.aggregate({$group:{_id:{openid:"$openid"},total:{$sum:"$inte"}}}).exec(t)},exports.today=function(e,t){var n,a,o;return a=new Date,o=new Date(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" 00:00:00"),n=new Date(a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate()+" 23:59:59"),Inte.find({create_at:{$gte:o,$lt:n},openid:e},t)},exports.newInte=function(e,t,n,a){var o;return o=new Inte,o.openid=e,o.inte=t,o.action=n,o.save(a)};